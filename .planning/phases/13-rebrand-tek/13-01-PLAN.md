---
phase: 13-rebrand-tek
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/core/src/config/constants.ts
  - packages/core/src/config/types.ts
  - packages/core/src/index.ts
  - packages/core/package.json
  - packages/db/package.json
  - packages/cli/package.json
  - packages/gateway/package.json
  - packages/telegram/package.json
  - package.json
  - packages/db/src/connection.ts
  - packages/db/src/memory/daily-logger.ts
  - packages/db/src/memory/memory-curator.ts
  - packages/db/src/memory/soul-manager.ts
  - packages/gateway/src/session/store.ts
  - packages/gateway/src/ws/server.ts
  - packages/gateway/src/ws/handlers.ts
  - packages/gateway/src/skills/browser.ts
  - packages/gateway/src/llm/provider.ts
  - packages/gateway/src/agent/failure-detector.ts
  - packages/gateway/src/memory/memory-manager.ts
  - packages/gateway/src/tools/skill.ts
  - packages/gateway/src/workflow/loader.ts
  - packages/gateway/src/memory/thread-manager.ts
  - packages/gateway/src/llm/registry.ts
  - packages/gateway/src/agent/approval-gate.ts
  - packages/gateway/src/workflow/engine.ts
  - packages/gateway/src/workflow/executor.ts
  - packages/gateway/src/agent/tool-registry.ts
  - packages/gateway/src/usage/store.ts
  - packages/gateway/src/tools/filesystem.ts
  - packages/gateway/src/workflow/state.ts
  - packages/gateway/src/usage/tracker.ts
  - packages/gateway/src/agent/tool-loop.ts
  - packages/gateway/src/context/assembler.ts
  - packages/gateway/src/key-server/auth.ts
  - packages/gateway/src/agent/preflight.ts
  - packages/gateway/src/tools/shell.ts
  - packages/gateway/src/scheduler/store.ts
  - packages/gateway/src/mcp/config.ts
  - packages/gateway/src/key-server/server.ts
  - packages/gateway/src/mcp/client-manager.ts
  - packages/gateway/src/key-server/routes.ts
  - packages/gateway/src/scheduler/scheduler.ts
  - packages/gateway/src/claude-code/session-manager.ts
  - packages/gateway/src/claude-code/event-relay.ts
  - packages/gateway/src/claude-code/approval-proxy.ts
  - packages/telegram/src/handlers/callback.ts
  - packages/telegram/src/formatter.ts
  - packages/telegram/src/streaming/accumulator.ts
  - packages/telegram/src/bot.ts
  - packages/telegram/src/handlers/message.ts
  - packages/telegram/src/transport.ts
  - packages/telegram/src/auth/pairing.ts
  - packages/cli/src/vault/index.ts
  - packages/cli/src/lib/gateway-client.ts
  - packages/cli/src/vault/providers.ts
  - packages/cli/src/lib/discovery.ts
  - packages/cli/src/hooks/useWebSocket.ts
  - packages/cli/src/commands/audit.ts
  - packages/cli/src/index.ts
  - packages/cli/src/hooks/useSlashCommands.ts
  - packages/cli/src/hooks/useChat.ts
  - packages/cli/src/commands/config.ts
  - packages/cli/src/commands/init.ts
  - packages/cli/src/components/Onboarding.tsx
autonomous: true
requirements:
  - configurable project name constant
  - package scope rename

must_haves:
  truths:
    - "Project name is defined in a single constant file and flows to all derived values"
    - "All package.json files use @tek/* scope instead of @agentspace/*"
    - "All TypeScript import statements reference @tek/* instead of @agentspace/*"
    - "Project builds successfully with new package names"
  artifacts:
    - path: "packages/core/src/config/constants.ts"
      provides: "Centralized PROJECT_NAME, SCOPE, CONFIG_DIR_NAME, CLI_COMMAND, DB_NAME constants"
      exports: ["PROJECT_NAME", "SCOPE", "CONFIG_DIR_NAME", "CLI_COMMAND", "DB_NAME", "DISPLAY_NAME"]
    - path: "packages/core/src/config/types.ts"
      provides: "CONFIG_DIR and DB_PATH derived from constants"
      contains: "CONFIG_DIR_NAME"
  key_links:
    - from: "packages/core/src/config/constants.ts"
      to: "packages/core/src/config/types.ts"
      via: "import CONFIG_DIR_NAME, DB_NAME"
      pattern: "import.*constants"
    - from: "packages/core/src/config/types.ts"
      to: "all packages"
      via: "CONFIG_DIR export"
      pattern: "CONFIG_DIR"
---

<objective>
Centralize project identity into a single constants file, rename all package scopes from @agentspace to @tek, and update all import paths across the entire codebase.

Purpose: This is the foundation change. Every other reference (CLI command, config paths, display strings) derives from what we establish here. The centralized constant makes future renames a one-file change.
Output: All packages renamed, all imports updated, project builds cleanly.
</objective>

<execution_context>
@/Users/hitekmedia/.claude/get-shit-done/workflows/execute-plan.md
@/Users/hitekmedia/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create centralized project constants and update core types</name>
  <files>
    packages/core/src/config/constants.ts
    packages/core/src/config/types.ts
    packages/core/src/index.ts
  </files>
  <action>
    Create a new file `packages/core/src/config/constants.ts` with:
    ```typescript
    // Single source of truth for project identity.
    // Change these values to rebrand the entire project.
    export const PROJECT_NAME = "tek";
    export const DISPLAY_NAME = "Tek";
    export const SCOPE = "@tek";
    export const CONFIG_DIR_NAME = "tek";
    export const CLI_COMMAND = "tek";
    export const DB_NAME = "tek.db";
    export const KEYCHAIN_SERVICE = "tek";
    ```

    Update `packages/core/src/config/types.ts` to import from constants:
    - Replace hardcoded `"agentspace"` in CONFIG_DIR with `CONFIG_DIR_NAME` from `./constants.js`
    - Replace hardcoded `"agentspace.db"` in DB_PATH with `DB_NAME` from `./constants.js`
    - Add import: `import { CONFIG_DIR_NAME, DB_NAME } from "./constants.js";`
    - CONFIG_DIR becomes: `join(homedir(), ".config", CONFIG_DIR_NAME)`
    - DB_PATH becomes: `join(CONFIG_DIR, DB_NAME)`

    Update `packages/core/src/index.ts` to re-export constants:
    - Add `export * from "./config/constants.js";` (or add the specific exports if barrel file is selective)
    - Verify existing exports from types.ts still work
  </action>
  <verify>
    Run `cd /Users/hitekmedia/Documents/GitHub/AgentSpace/packages/core && npx tsc -p tsconfig.json --noEmit` — should compile with zero errors.
  </verify>
  <done>
    constants.ts exists with all 7 exports. types.ts derives CONFIG_DIR and DB_PATH from constants (no hardcoded "agentspace"). Core package compiles cleanly.
  </done>
</task>

<task type="auto">
  <name>Task 2: Rename all package scopes and update all import paths</name>
  <files>
    package.json
    packages/core/package.json
    packages/db/package.json
    packages/cli/package.json
    packages/gateway/package.json
    packages/telegram/package.json
    (all 57 .ts/.tsx files with @agentspace/ imports)
  </files>
  <action>
    **Package.json renames (6 files):**
    - Root `package.json`: `"name": "agentspace"` -> `"name": "tek"`
    - `packages/core/package.json`: `"name": "@agentspace/core"` -> `"name": "@tek/core"`
    - `packages/db/package.json`: `"name": "@agentspace/db"` -> `"name": "@tek/db"`, dependency `"@agentspace/core"` -> `"@tek/core"`
    - `packages/cli/package.json`: `"name": "@agentspace/cli"` -> `"name": "@tek/cli"`, all `@agentspace/*` deps -> `@tek/*`
    - `packages/gateway/package.json`: `"name": "@agentspace/gateway"` -> `"name": "@tek/gateway"`, all `@agentspace/*` deps -> `@tek/*`
    - `packages/telegram/package.json`: `"name": "@agentspace/telegram"` -> `"name": "@tek/telegram"`, all `@agentspace/*` deps -> `@tek/*`

    **Import path renames (57 files across all packages):**
    Use a bulk find-and-replace across all .ts and .tsx files under packages/:
    - `@agentspace/core` -> `@tek/core`
    - `@agentspace/db` -> `@tek/db`
    - `@agentspace/cli` -> `@tek/cli`
    - `@agentspace/gateway` -> `@tek/gateway`
    - `@agentspace/telegram` -> `@tek/telegram`

    This covers 76 occurrences in .ts files, 1 in .tsx, and 15 in .json files.

    **Important:** `packages/gateway/src/llm/registry.ts` uses a deep subpath import `@agentspace/cli/vault` which becomes `@tek/cli/vault`. After renaming, verify that the `exports` field in `packages/cli/package.json` still maps the `/vault` subpath correctly (it should, since only the scope prefix changes, but confirm it resolves).

    After all renames, run `pnpm install` from the repo root to update the lockfile and workspace resolution.

    **Important:** The bin entry in cli/package.json stays as `"agentspace"` for now — that changes in Plan 13-02 along with other runtime references. This plan handles only the package identity and import paths.
  </action>
  <verify>
    Run full build from repo root to verify all imports resolve (two-pass build needed because gateway<->cli have a cyclic dependency — first gateway pass builds partial types that cli needs, then cli builds, then gateway builds fully):
    ```
    cd /Users/hitekmedia/Documents/GitHub/AgentSpace
    pnpm install
    (cd packages/core && npx tsc -p tsconfig.json)
    (cd packages/db && npx tsc -p tsconfig.json)
    (cd packages/gateway && npx tsc -p tsconfig.json 2>/dev/null) || true
    (cd packages/cli && npx tsc -p tsconfig.json)
    (cd packages/gateway && npx tsc -p tsconfig.json)
    (cd packages/telegram && npx tsc -p tsconfig.json)
    ```
    All packages compile with zero errors.
    Verify no remaining `@agentspace/` references in source: `grep -r "@agentspace/" packages/ --include="*.ts" --include="*.tsx" --include="*.json" | grep -v node_modules | grep -v dist | grep -v .tsbuildinfo` should return empty.
  </verify>
  <done>
    All 6 package.json files use @tek scope. All 76+ import statements use @tek/*. pnpm lockfile updated. Full two-pass build succeeds with zero errors. No remaining @agentspace/ references in source files.
  </done>
</task>

</tasks>

<verification>
1. `grep -r "@agentspace/" packages/ --include="*.ts" --include="*.tsx" --include="*.json" | grep -v node_modules | grep -v dist` returns empty
2. `packages/core/src/config/constants.ts` exists with PROJECT_NAME = "tek"
3. `packages/core/src/config/types.ts` imports from constants (no hardcoded "agentspace")
4. Full two-pass build completes with zero TypeScript errors
5. `pnpm install` succeeds (workspace resolution works with new names)
</verification>

<success_criteria>
- Single constants.ts file defines project identity
- All package.json names use @tek/* scope
- All import statements reference @tek/*
- Full project builds successfully
- Zero remaining @agentspace/ references in source code
</success_criteria>

<output>
After completion, create `.planning/phases/13-rebrand-tek/13-01-SUMMARY.md`
</output>
